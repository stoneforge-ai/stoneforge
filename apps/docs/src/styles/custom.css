/* =============================================================================
   STONEFORGE DOCS — STARLIGHT CSS OVERRIDES
   Maps brand tokens → Starlight's --sl-* system + atmospheric design layer
   ============================================================================= */

/* --- Fonts --- */
:root {
  --sl-font: var(--sf-font-body);
  --sl-font-mono: var(--sf-font-code);
}

/* --- Content width --- */
:root {
  --sl-content-width: 52rem;
  --sl-sidebar-width: 17rem;
}

/* --- Border radius --- */
:root {
  --sl-border-radius: 0.5rem;
}

/* --- Site title wordmark (match website) --- */
.site-title {
  gap: 1rem;
}

.site-title span {
  font-family: var(--sf-font-headline);
  font-weight: 600;
  letter-spacing: 0.125em;
  color: #ffffff;
}

:root[data-theme='light'] .site-title span {
  color: #273644;
}

/* --- Sidebar refinements --- */
.sidebar-pane {
  border-right: 1px solid var(--sl-color-hairline);
}

/* --- Card/aside border radius --- */
.card {
  border-radius: 0.75rem;
}

starlight-tabs {
  --_border-radius: 0.75rem;
}

/* --- Link hover effects --- */
.sl-markdown-content a:not([class]) {
  text-decoration-thickness: 1px;
  text-underline-offset: 3px;
  transition: color 0.2s ease, text-decoration-color 0.2s ease;
}

.sl-markdown-content a:not([class]):hover {
  text-decoration-color: var(--sl-color-accent);
}

/* --- Smooth scrolling --- */
html {
  scroll-behavior: smooth;
}

/* --- Selection color --- */
::selection {
  background-color: rgba(96, 165, 250, 0.25);
}

:root[data-theme='light'] ::selection {
  background-color: rgba(37, 99, 235, 0.18);
}

/* --- Antialiased text --- */
body {
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
}

/* --- Light mode explicit body background --- */
:root[data-theme='light'] body {
  background-color: #ffffff;
}

/* =============================================================================
   ATMOSPHERIC BACKGROUND LAYER
   ============================================================================= */

/* Radial gradient wash — "lit from above" effect (dark mode) */
body::before {
  content: '';
  position: fixed;
  inset: 0;
  background: radial-gradient(ellipse 80% 50% at 50% -20%, rgba(96, 165, 250, 0.07) 0%, transparent 70%);
  pointer-events: none;
  z-index: -2;
}

/* Noise texture overlay (dark mode) */
body::after {
  content: '';
  position: fixed;
  inset: 0;
  background: var(--sf-noise);
  background-size: 128px 128px;
  mix-blend-mode: overlay;
  opacity: 0.35;
  pointer-events: none;
  z-index: -1;
}

/* Light mode: very subtle warm glow, minimal noise */
:root[data-theme='light'] body::before {
  background: radial-gradient(ellipse 70% 40% at 50% -10%, rgba(37, 99, 235, 0.03) 0%, transparent 60%);
}

:root[data-theme='light'] body::after {
  opacity: 0.08;
  mix-blend-mode: multiply;
}

/* =============================================================================
   STARLIGHT CARD / LINKCARD OVERRIDES
   ============================================================================= */

.card {
  position: relative;
  background: var(--sf-surface);
  border: 1px solid var(--sl-color-hairline);
  transition: border-color 0.4s var(--sf-ease-out-expo),
              box-shadow 0.4s var(--sf-ease-out-expo),
              transform 0.3s var(--sf-ease-out-expo);
  overflow: hidden;
}

.card::before {
  content: '';
  position: absolute;
  inset: 0;
  background: linear-gradient(135deg, transparent 40%, rgba(96, 165, 250, 0.05) 60%, transparent 80%);
  opacity: 0;
  transition: opacity 0.4s var(--sf-ease-out-expo);
  pointer-events: none;
}

.card:hover {
  border-color: var(--sf-border-accent);
  box-shadow: 0 0 20px rgba(96, 165, 250, 0.06), var(--sf-shadow-md);
  transform: translateY(-2px);
}

.card:hover::before {
  opacity: 1;
}

:root[data-theme='light'] .card {
  background: #ffffff;
  border-color: #e2e8f0;
}

:root[data-theme='light'] .card:hover {
  border-color: rgba(37, 99, 235, 0.2);
  box-shadow: 0 4px 16px rgba(37, 99, 235, 0.06), var(--sf-shadow-md);
}

:root[data-theme='light'] .card::before {
  background: linear-gradient(135deg, transparent 40%, rgba(37, 99, 235, 0.03) 60%, transparent 80%);
}

/* LinkCard specific */
.sl-link-card a {
  transition: border-color 0.4s var(--sf-ease-out-expo),
              box-shadow 0.4s var(--sf-ease-out-expo),
              transform 0.3s var(--sf-ease-out-expo);
}

.sl-link-card a:hover {
  border-color: var(--sf-border-accent);
  box-shadow: 0 0 20px rgba(96, 165, 250, 0.06), var(--sf-shadow-md);
  transform: translateY(-2px);
}

:root[data-theme='light'] .sl-link-card a {
  border-color: #e2e8f0;
}

:root[data-theme='light'] .sl-link-card a:hover {
  border-color: rgba(37, 99, 235, 0.2);
  box-shadow: 0 4px 16px rgba(37, 99, 235, 0.06), var(--sf-shadow-md);
}

/* =============================================================================
   ASIDE REDESIGN
   ============================================================================= */

.starlight-aside {
  border-radius: 0.75rem;
  border-left: 3px solid;
  padding: 1rem 1.25rem;
}

.starlight-aside--note {
  border-color: var(--sf-accent);
  background: linear-gradient(135deg, rgba(96, 165, 250, 0.06), rgba(96, 165, 250, 0.02));
}

.starlight-aside--tip {
  border-color: var(--sf-accent-violet);
  background: linear-gradient(135deg, rgba(167, 139, 250, 0.06), rgba(167, 139, 250, 0.02));
}

.starlight-aside--caution {
  border-color: var(--sf-warning);
  background: linear-gradient(135deg, rgba(251, 191, 36, 0.06), rgba(251, 191, 36, 0.02));
}

.starlight-aside--danger {
  border-color: var(--sf-error);
  background: linear-gradient(135deg, rgba(248, 113, 113, 0.06), rgba(248, 113, 113, 0.02));
}

/* Light mode aside variants */
:root[data-theme='light'] .starlight-aside--note {
  border-color: #2563eb;
  background: linear-gradient(135deg, rgba(37, 99, 235, 0.05), rgba(37, 99, 235, 0.01));
}

:root[data-theme='light'] .starlight-aside--tip {
  border-color: #7c3aed;
  background: linear-gradient(135deg, rgba(124, 58, 237, 0.05), rgba(124, 58, 237, 0.01));
}

:root[data-theme='light'] .starlight-aside--caution {
  border-color: #d97706;
  background: linear-gradient(135deg, rgba(217, 119, 6, 0.05), rgba(217, 119, 6, 0.01));
}

:root[data-theme='light'] .starlight-aside--danger {
  border-color: #dc2626;
  background: linear-gradient(135deg, rgba(220, 38, 38, 0.05), rgba(220, 38, 38, 0.01));
}

/* =============================================================================
   SIDEBAR ACTIVE INDICATOR
   ============================================================================= */

nav[aria-label="Main"] a[aria-current="page"] {
  position: relative;
  background: rgba(96, 165, 250, 0.15);
  border-radius: 0.375rem;
  margin-left: -0.5rem;
  padding-left: 0.5rem;
  color: var(--sl-color-white);
  font-weight: 500;
}

nav[aria-label="Main"] a[aria-current="page"]::before {
  content: '';
  position: absolute;
  left: 0;
  top: 0.25rem;
  bottom: 0.25rem;
  width: 3px;
  background: var(--sl-color-accent);
  border-radius: 2px;
}

:root[data-theme='light'] nav[aria-label="Main"] a[aria-current="page"] {
  background: rgba(37, 99, 235, 0.1);
  color: #1e3a5f;
}

/* =============================================================================
   CONTENT TYPOGRAPHY ENHANCEMENTS
   ============================================================================= */

/* H2 section borders for visual rhythm */
.sl-markdown-content h2 {
  border-top: 1px solid var(--sl-color-hairline);
  padding-top: 1.5rem;
  margin-top: 2.5rem;
}

.sl-markdown-content h2:first-child {
  border-top: none;
  padding-top: 0;
  margin-top: 0;
}

/* Inline code refinement */
.sl-markdown-content :not(pre) > code {
  background: var(--sl-color-bg-inline-code, var(--sl-color-accent-low));
  border: 1px solid transparent;
}

:root[data-theme='light'] .sl-markdown-content :not(pre) > code {
  border-color: rgba(37, 99, 235, 0.1);
  background: rgba(37, 99, 235, 0.06);
}

/* Blockquote styling */
.sl-markdown-content blockquote {
  border-left: 3px solid var(--sl-color-accent);
  background: var(--sf-surface);
  padding: 0.75rem 1.25rem;
  border-radius: 0 0.5rem 0.5rem 0;
}

:root[data-theme='light'] .sl-markdown-content blockquote {
  background: #f8fafc;
}

/* HR styling — gradient fade */
.sl-markdown-content hr {
  border: none;
  height: 1px;
  background: linear-gradient(to right, var(--sl-color-accent), transparent);
  opacity: 0.3;
}

/* =============================================================================
   FOCUS STATES
   ============================================================================= */

:focus-visible {
  outline: 2px solid var(--sl-color-accent);
  outline-offset: 2px;
  border-radius: 2px;
}
